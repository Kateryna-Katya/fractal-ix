{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    // --- 1. ИНИЦИАЛИЗАЦИЯ БИБЛИОТЕК ---\n    lucide.createIcons();\n    gsap.registerPlugin(ScrollTrigger);\n\n    // Настройка Lenis (плавный скролл)\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n    });\n\n    // Синхронизация Lenis и ScrollTrigger\n    lenis.on('scroll', ScrollTrigger.update);\n    gsap.ticker.add((time) => {\n        lenis.raf(time * 1000);\n    });\n    gsap.ticker.lagSmoothing(0);\n\n    // --- 2. ВАЛИДАЦИЯ ТЕЛЕФОНА (ЗАПРЕТ БУКВ) ---\n    const phoneInput = document.getElementById('phone-input');\n    if (phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            // Удаляем всё, кроме цифр и знака +\n            // /[^0-9+]/g означает: найти всё, что НЕ цифра и НЕ плюс, и заменить на пустоту\n            const cursorPosition = e.target.selectionStart;\n            const originalLength = e.target.value.length;\n            \n            e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n            \n            // Сохраняем позицию курсора после фильтрации\n            const newLength = e.target.value.length;\n            e.target.setSelectionRange(cursorPosition - (originalLength - newLength), cursorPosition - (originalLength - newLength));\n        });\n    }\n\n    // --- 3. МОБИЛЬНОЕ МЕНЮ ---\n    const burger = document.getElementById('burger-menu');\n    const mobileMenu = document.getElementById('mobile-menu');\n    const header = document.querySelector('.header');\n    const menuLinks = document.querySelectorAll('.mobile-menu__link');\n\n    const toggleMenu = (state) => {\n        const isActive = state !== undefined ? state : !mobileMenu.classList.contains('active');\n        mobileMenu.classList.toggle('active', isActive);\n        header.classList.toggle('menu-open', isActive);\n        document.body.style.overflow = isActive ? 'hidden' : '';\n    };\n\n    if (burger) {\n        burger.addEventListener('click', () => toggleMenu());\n    }\n\n    menuLinks.forEach(link => {\n        link.addEventListener('click', () => toggleMenu(false));\n    });\n\n    // --- 4. АНИМАЦИИ ПОЯВЛЕНИЯ (БЕЗОПАСНЫЙ ЦИКЛ) ---\n    const setupAnims = () => {\n        // Очистка\n        ScrollTrigger.getAll().forEach(t => t.kill());\n\n        // Общая настройка для всех карточек (Data, Income, Tech)\n        const animateItems = (selector, props) => {\n            document.querySelectorAll(selector).forEach(el => {\n                gsap.to(el, {\n                    scrollTrigger: {\n                        trigger: el,\n                        start: \"top 90%\",\n                    },\n                    opacity: 1,\n                    ...props,\n                    from: { opacity: 0, ...props.from }\n                });\n            });\n        };\n\n        animateItems('.info-card', { y: 0, duration: 0.8, ease: \"back.out(1.4)\", from: { y: 50 } });\n        animateItems('.income-card', { scale: 1, duration: 0.6, from: { scale: 0.8 } });\n        animateItems('.tech-item', { x: 0, duration: 0.6, from: { x: -50 } });\n\n        // Hero (сразу)\n        gsap.timeline()\n            .to(\".hero__title\", { opacity: 1, x: 0, duration: 1, from: { opacity: 0, x: -50 } })\n            .to(\".hero__text\", { opacity: 1, y: 0, duration: 0.6, from: { opacity: 0, y: 20 } }, \"-=0.6\")\n            .to(\".brutal-card\", { opacity: 1, scale: 1, rotate: 0, duration: 0.8, from: { opacity: 0, scale: 0.8, rotate: 10 } }, \"-=0.4\");\n    };\n\n    // --- 5. ФОРМА И КАПЧА ---\n    const contactForm = document.getElementById('main-form');\n    if (contactForm) {\n        const n1 = Math.floor(Math.random() * 10);\n        const n2 = Math.floor(Math.random() * 5);\n        const ans = n1 + n2;\n        const label = document.getElementById('captcha-label');\n        const captchaInput = document.getElementById('captcha-input');\n        if (label) label.innerText = `РЕШИТЕ ПРИМЕР: ${n1} + ${n2} = ?`;\n\n        contactForm.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const success = document.getElementById('form-success');\n            const error = document.getElementById('form-error');\n\n            if (parseInt(captchaInput.value) === ans) {\n                success.style.display = 'block';\n                error.style.display = 'none';\n                contactForm.style.opacity = '0.5';\n                contactForm.style.pointerEvents = 'none';\n            } else {\n                error.style.display = 'block';\n                gsap.to(captchaInput, { x: 5, repeat: 5, yoyo: true, duration: 0.05 });\n            }\n        });\n    }\n\n    // --- 6. COOKIE POPUP ---\n    const cookiePopup = document.getElementById('cookie-popup');\n    if (cookiePopup && !localStorage.getItem('fractal_cookies_accepted')) {\n        setTimeout(() => {\n            cookiePopup.classList.add('active');\n            gsap.to(cookiePopup, { opacity: 1, y: 0, duration: 0.5, from: { opacity: 0, y: 20 } });\n        }, 2500);\n    }\n\n    const acceptBtn = document.getElementById('accept-cookies');\n    if (acceptBtn) {\n        acceptBtn.addEventListener('click', () => {\n            localStorage.setItem('fractal_cookies_accepted', 'true');\n            cookiePopup.classList.remove('active');\n        });\n    }\n\n    // Запуск после полной загрузки\n    window.addEventListener('load', () => {\n        setupAnims();\n        ScrollTrigger.refresh();\n    });\n});"],"names":["lenis","t","time","phoneInput","cursorPosition","originalLength","newLength","burger","mobileMenu","header","menuLinks","toggleMenu","state","isActive","link","setupAnims","animateItems","selector","props","el","contactForm","n1","n2","ans","label","captchaInput","e","success","error","cookiePopup","acceptBtn"],"mappings":"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"}